### 0923-什么是闭包？

在前端开发中我们会经常碰到闭包的问题，这也是面试中常考的题目，今天我们就来聊一聊JavaScript中的闭包吧

##### 一、什么是闭包

函数和对其周围状态（词法环境）的引用捆绑在一起构成**闭包**，简单的来说，如果函数A里面定义了一个函数B，且在函数B里引用了函数A中的变量C，则函数B和变量C就形成了一个词法环境，函数A和词法环境就是一个闭包

##### 二、闭包的应用场景

闭包的用法主要有两个

1.读取函数内部的变量

在JS中作用域分为全局作用域和函数作用域，也就是函数内部是访问不到函数外部的变量的，但是通过闭包可以访问到函数内部的变量

```
function a() {
 var name = 'fire'
 function b() {
     return name
}
 return b()
}
a() //'fire'
```

2.让函数内部的变量始终保存在内存中

在JS中，函数内部的变量会随着函数调用结束后被垃圾回收机制回收，但是在闭包中函数的内部变量不会被回收，当然这也存在内存泄漏的隐患，我们需要在函数退出之前，将不再使用的变量清除。

```
function f1() {
   var n = 1;
   addN = function () {
       n += 1
  }
   function f2() {
       return n;
  }
   return f2;
}
var result = f1();
result();
console.log(result())// 1
addN();
result();
console.log(result())// 2
```

思考题

```
for (var i = 0 ; i < 5; i++) {
      setTimeout(function time() {
          console.log(i)
      }(i))
}
for (var i = 0 ; i < 5; i++) {
      setTimeout(() => {
          console.log(i)
      })
}
```

为什么这两个的答案不一样呢！

好了，以上就是本期内容啦，如果对你有帮助的话请点个赞吧！