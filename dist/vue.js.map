{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parse.js","../src/compiler/index.js","../src/lifecycle.js","../src/utils.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["function genProps(attrs) {\r\n  return attrs.reduce((pre, cur, index) => {\r\n    if (cur.name === 'style') {\r\n      let styleObj = {};\r\n      cur.value.replace(/([^;:]+)\\:([^;:]+)/g, function() {\r\n        styleObj[arguments[1]] = arguments[2]\r\n      })\r\n      cur.value = styleObj\r\n    }\r\n    if (index === attrs.length - 1) {\r\n      pre += `${cur.name}:${JSON.stringify(cur.value)}}`\r\n    } else {\r\n      pre += `${cur.name}:${JSON.stringify(cur.value)},`\r\n    }\r\n    return pre\r\n  }, '{')\r\n}\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配{{}}\r\nfunction gen(el) {\r\n  if (el.type === 1) {\r\n    return generate(el)\r\n  } else {\r\n    let text = el.text\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v('${text}')`\r\n    } else {\r\n      let tokens = [], match, lastIndex = defaultTagRE.lastIndex =  0\r\n      while (match = defaultTagRE.exec(text)) {\r\n        let index = match.index\r\n        if (index > lastIndex) {\r\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)))\r\n        }\r\n        tokens.push(`_s(${match[1].trim()})`)\r\n        lastIndex = index + match[0].length\r\n      }\r\n      if (lastIndex < text.length) {\r\n        tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n      }\r\n      return `_v(${tokens.join('+')})`\r\n    }\r\n  }\r\n}\r\nfunction genChildren(el) {\r\n  let children = el.children\r\n  if (children) {\r\n    return children.map(item => gen(item)).join(',')\r\n  }\r\n  return false\r\n}\r\nexport function generate(el) {\r\n  let children = genChildren(el)\r\n  let code = `_c('${el.tag}',${\r\n    el.attrs.length ? genProps(el.attrs) : 'undefined'\r\n  }${\r\n    children ? `,${children}` : ''\r\n  })`\r\n  return code\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*` // 标签名\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})` // 获取标签名\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) //开始标签\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) //结束标签\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/ // 标签属性\r\nconst startTagClose = /^\\s*(\\/?)>/ // 标签闭合\r\n\r\n// 通过栈将解析的结果组装成一个树结构\r\nfunction createAstElement(tagName, attrs) {\r\n  return {\r\n    tag: tagName,\r\n    type: 1,\r\n    children: [],\r\n    parent: null,\r\n    attrs\r\n  }\r\n}\r\nlet root = null, stack = []\r\n// 开始标签\r\nfunction start(tagName, attributes) {\r\n  let element = createAstElement(tagName, attributes)\r\n  if (stack.length > 0) {\r\n    let parent = stack[stack.length - 1]\r\n    element.parent = parent\r\n    parent.children.push(element)\r\n  }\r\n  if (!root) {\r\n    root = element\r\n  }\r\n  stack.push(element)\r\n}\r\n// 结束标签\r\nfunction end(tagName) {\r\n  let last = stack.pop()\r\n  if (last.tag !== tagName) {\r\n    throw new Error('标签有误！')\r\n  }\r\n}\r\n// 文本内容\r\nfunction chars(text) {\r\n  text = text.replace('/\\s/g', '')\r\n  let parent = stack[stack.length - 1]\r\n  if (text) {\r\n    parent.children.push({\r\n      type: 3,\r\n      text\r\n    })\r\n  }\r\n}\r\n// 将html解析成对应的脚本来触发tokens\r\nexport function parseHTML(html) {\r\n  function advance(len) {\r\n    html = html.substring(len)\r\n  }\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen)\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n      advance(start[0].length)\r\n      let end, attr\r\n      // 如果没有遇到闭合标签则不停的解析\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        // 将匹配到属性标签删除\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5],\r\n        })\r\n        advance(attr[0].length)\r\n      }\r\n      if (end) {\r\n        advance(end[0].length)\r\n      }\r\n      // 返回匹配到的属性和标签名\r\n      return match\r\n    }\r\n    return false\r\n  }\r\n  while (html) {\r\n    let textEnd = html.indexOf('<')\r\n    if (textEnd === 0) {\r\n      // 解析开始标签\r\n      const startTagMatch = parseStartTag(html)\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n      // 解析结束标签\r\n      const endTagMatch = html.match(endTag)\r\n      if (endTagMatch) {\r\n        end(endTagMatch[1])\r\n        advance(endTagMatch[0].length)\r\n        continue\r\n      }\r\n    }\r\n    let text\r\n    if (textEnd > 0) {\r\n      text = html.substring(0, textEnd)\r\n    }\r\n    if (text) {\r\n      chars(text)\r\n      advance(text.length)\r\n    }\r\n  }\r\n  return root\r\n}","import { generate } from \"./generate\"\r\nimport { parseHTML } from \"./parse\"\r\n\r\n// html => ast => render函数 =》 虚拟dom =》 真实dom\r\nexport function compileToFunction(template) {\r\n  let root = parseHTML(template)\r\n  let code = generate(root)\r\n  let render = new Function(`with(this){return ${code}}`)\r\n  return render\r\n}\r\n","export function lifecycleMixin(Vue) {\r\n  Vue.prototype._update = function () {\r\n  }\r\n}\r\n\r\nexport function mountComponent(vm, el) {\r\n  // 更新函数，数据变化后会再次调用此函数\r\n  let updateComponent = () => {\r\n    // 调用render函数，生成虚拟dom\r\n    // 用虚拟dom生成真实dom\r\n    vm._update(vm._render())\r\n  }\r\n  updateComponent()\r\n}","export function isFunction(val) {\n  return typeof val === 'function'\n}\nexport function isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]' || val === null\n}","let oldArrayPrototype = Array.prototype\r\nexport let arrayMethods = Object.create(oldArrayPrototype)\r\nlet methods = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'splice',\r\n  'reverse',\r\n  'sort'\r\n]\r\nmethods.forEach(method => {\r\n  // 重写数组上的方法\r\n  arrayMethods[method] = function(...args) {\r\n    oldArrayPrototype[method].call(this, ...args)\r\n    let insert\r\n    let ob = this.__ob__\r\n    switch(method) {\r\n      case 'unshift':\r\n        insert = args\r\n        break\r\n      case 'push':\r\n        insert = args\r\n        break\r\n      case 'splice':\r\n        insert = args.slice(2)\r\n    }\r\n    if (insert) {\r\n      ob.observeArray(insert)\r\n    }\r\n  }\r\n})","import { isObject } from \"../utils\"\nimport { arrayMethods } from \"./array\"\n\n// 通过类来检测数据，类有类型\nclass Observer {\n  constructor(data) { // 对对象中的所有属性进行劫持\n    // 将Observer实例赋值给data的ob属性，方便对数组劫持的时候调用Observe，同时可以判断如果一个数据有ob属性，说明它已经被劫持过了\n    Object.defineProperty(data,' __ob__', {\n      value: this,\n      enumerable: false\n    })\n    if (Array.isArray(data)) {\n      data.__proto__ = arrayMethods\n      // 如果数组的的子元素为对象需要对该子元素进行劫持\n      this.observeArray(data)\n    } else {\n      this.walk(data)\n    }\n  }\n  observeArray(data) {\n    data.forEach(ele => {\n      observe(ele)\n    })\n  }\n  walk(data) {\n    Object.keys(data).forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n// 对对象的属性进行遍历，用defineProperty对对象的数据进行劫持\nfunction defineReactive(data, key, value) {\n  // 如果对象中的属性还是对象则需要递归调用监测方法\n  observe(value)\n  Object.defineProperty(data, key, {\n    get() {\n      return value\n    },\n    set(newV) {\n      observe(newV) // 如果给对象的属性复制的是一个新对象，则需要对新对象重新劫持\n      value = newV\n    }\n  })\n}\nexport function observe(data) {\n  if (!isObject(data)) {\n    return\n  }\n  if (data.__ob__) {\n    return\n  }\n  new Observer(data)\n}","import { observe } from \"./observer/index\"\nimport { isFunction } from \"./utils\"\n\nexport function initState(vm) { // 状态初始化\n  const opts = vm.$options\n  if (opts.data) {\n    initData(vm)\n  }\n}\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newV) {\n      vm[source][key] = newV\n    }\n  })\n}\nfunction initData(vm) {\n  let data = vm.$options.data\n  // 将劫持的数据放在实例的_data上\n  data = vm._data = isFunction(data) ? data.call(vm) : data;\n  // 对数据做一层代理\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n  observe(data)\n}","import { compileToFunction } from \"./compiler/index\"\nimport { mountComponent } from \"./lifecycle\"\nimport { initState } from \"./state\"\n\n// 在vue的基础上做一次混合操作，为vue原型添加方法\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options //方便对options进行扩展\n\n    // 对数据进行初始化 data watch computed\n    initState(vm)\n    if (vm.$options.el) {\n      vm.$mounted(vm.$options.el)\n    }\n  }\n\n  Vue.prototype.$mounted = function (el) {\n    const vm = this\n    const options = vm.$options\n    el = document.querySelector(el)\n    // 优先级：render > template > el\n    if (!options.render) {\n      let template = options.template\n      // 如果用户没有传template则取el的内容作为模板\n      if (!template && el) {\n        template = el.outerHTML\n        let render = compileToFunction(template)\n        // 将render函数添加到options上\n        options.render = render\n        console.log(options.render)\n        // 组件挂载流程\n        mountComponent(vm, el)\n      }\n    }\n  }\n}\n","export function creatElement(vm, tag, data = {}, ...children) {\r\n  return vnode(vm, tag, data, data.key, children, undefined)\r\n}\r\nexport function creatTextElement(vm, text) {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text)\r\n}\r\nfunction vnode(vm, tag, data, key, children, text) {\r\n  return {\r\n    vm,\r\n    tag,\r\n    data,\r\n    key,\r\n    children,\r\n    text,\r\n  }\r\n}\r\n","import { creatElement, creatTextElement } from \"./vdom/index\"\r\n\r\nexport function renderMixin(Vue) {\r\n  Vue.prototype._c = function (tag, data, ...children) {\r\n    return creatElement(this, ...arguments)\r\n  }\r\n  Vue.prototype._v = function (text) {\r\n    return creatTextElement(this, text)\r\n  }\r\n  Vue.prototype._s = function (val) {\r\n    return JSON.stringify(val)\r\n  }\r\n  Vue.prototype._render = function () {\r\n    const vm = this\r\n    let render = vm.$options.render\r\n    let vnode = render.call(vm)\r\n    console.log(vnode)\r\n    return vnode\r\n  }\r\n}","import { initMixin } from \"./init\"\nimport { lifecycleMixin } from \"./lifecycle\"\nimport { renderMixin } from \"./render\"\n\nfunction Vue(options) {\n  // 初始化Vue实例的配置\n  this._init(options)\n}\n// 扩展原型\ninitMixin(Vue)\nrenderMixin(Vue) // _render\nlifecycleMixin(Vue) // _update\nexport default Vue"],"names":["genProps","attrs","reduce","pre","cur","index","name","styleObj","value","replace","arguments","length","JSON","stringify","defaultTagRE","gen","el","type","generate","text","test","tokens","match","lastIndex","exec","push","slice","trim","join","genChildren","children","map","item","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","createAstElement","tagName","parent","root","stack","start","attributes","element","end","last","pop","Error","chars","parseHTML","html","advance","len","substring","parseStartTag","attr","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunction","template","render","Function","lifecycleMixin","Vue","prototype","_update","mountComponent","vm","updateComponent","_render","isFunction","val","isObject","Object","toString","call","oldArrayPrototype","Array","arrayMethods","create","methods","forEach","method","args","insert","ob","__ob__","observeArray","Observer","data","defineProperty","enumerable","isArray","__proto__","walk","ele","observe","keys","key","defineReactive","get","set","newV","initState","opts","$options","initData","proxy","source","_data","initMixin","_init","options","$mounted","document","querySelector","outerHTML","console","log","creatElement","vnode","undefined","creatTextElement","renderMixin","_c","_v","_s"],"mappings":"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"}