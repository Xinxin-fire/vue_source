{"version":3,"file":"vue.js","sources":["../src/compiler/generate.js","../src/compiler/parse.js","../src/compiler/index.js","../src/utils.js","../src/observer/array.js","../src/observer/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["function genProps(attrs) {\n  return attrs.reduce((pre, cur, index) => {\n    if (cur.name === 'style') {\n      let styleObj = {};\n      cur.value.replace(/([^;:]+)\\:([^;:]+)/g, function() {\n        styleObj[arguments[1]] = arguments[2]\n      })\n      cur.value = styleObj\n    }\n    if (index === attrs.length - 1) {\n      pre += `${cur.name}:${JSON.stringify(cur.value)}`\n    } else {\n      pre += `${cur.name}:${JSON.stringify(cur.value)},`\n    }\n    return pre\n  }, '')\n}\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // 匹配{{}}\nfunction gen(el) {\n  if (el.type === 1) {\n    return generate(el)\n  } else {\n    let text = el.text\n    if (!defaultTagRE.test(text)) {\n      return `_v('${text}')`\n    } else {\n      let tokens = [], match, lastIndex = defaultTagRE.lastIndex =  0\n      while (match = defaultTagRE.exec(text)) {\n        let index = match.index\n        if (index > lastIndex) {\n          tokens.push(JSON.stringify(text.slice(lastIndex, index)))\n        }\n        tokens.push(`_s(${match[1].trim()})`)\n        lastIndex = index + match[0].length\n      }\n      if (lastIndex < text.length) {\n        tokens.push(JSON.stringify(text.slice(lastIndex)))\n      }\n      return `_v(${tokens.join('+')})`\n    }\n  }\n}\nfunction genChildren(el) {\n  let children = el.children\n  if (children) {\n    return children.map(item => gen(item)).join(',')\n  }\n  return false\n}\nexport function generate(el) {\n  let children = genChildren(el)\n  let code = `_c('${el.tag}',${\n    el.attrs.length ? genProps(el.attrs) : 'undefined'\n  }${\n    children ? `,${children}` : ''\n  })`\n  return code\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*` // 标签名\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})` // 获取标签名\nconst startTagOpen = new RegExp(`^<${qnameCapture}`) //开始标签\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`) //结束标签\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/ // 标签属性\nconst startTagClose = /^\\s*(\\/?)>/ // 标签闭合\n\n// 通过栈将解析的结果组装成一个树结构\nfunction createAstElement(tagName, attrs) {\n  return {\n    tag: tagName,\n    type: 1,\n    children: [],\n    parent: null,\n    attrs\n  }\n}\nlet root = null, stack = []\n// 开始标签\nfunction start(tagName, attributes) {\n  let element = createAstElement(tagName, attributes)\n  if (stack.length > 0) {\n    let parent = stack[stack.length - 1]\n    element.parent = parent\n    parent.children.push(element)\n  }\n  if (!root) {\n    root = element\n  }\n  stack.push(element)\n}\n// 结束标签\nfunction end(tagName) {\n  let last = stack.pop()\n  if (last.tag !== tagName) {\n    throw new Error('标签有误！')\n  }\n}\n// 文本内容\nfunction chars(text) {\n  text = text.replace('/\\s/g', '')\n  let parent = stack[stack.length - 1]\n  if (text) {\n    parent.children.push({\n      type: 3,\n      text\n    })\n  }\n}\n// 将html解析成对应的脚本来触发tokens\nexport function parseHTML(html) {\n  function advance(len) {\n    html = html.substring(len)\n  }\n  function parseStartTag() {\n    const start = html.match(startTagOpen)\n    if (start) {\n      const match = {\n        tagName: start[1],\n        attrs: []\n      }\n      advance(start[0].length)\n      let end, attr\n      // 如果没有遇到闭合标签则不停的解析\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\n        // 将匹配到属性标签删除\n        match.attrs.push({\n          name: attr[1],\n          value: attr[3] || attr[4] || attr[5],\n        })\n        advance(attr[0].length)\n      }\n      if (end) {\n        advance(end[0].length)\n      }\n      // 返回匹配到的属性和标签名\n      return match\n    }\n    return false\n  }\n  while (html) {\n    let textEnd = html.indexOf('<')\n    if (textEnd === 0) {\n      // 解析开始标签\n      const startTagMatch = parseStartTag(html)\n      if (startTagMatch) {\n        start(startTagMatch.tagName, startTagMatch.attrs)\n        continue\n      }\n      // 解析结束标签\n      const endTagMatch = html.match(endTag)\n      if (endTagMatch) {\n        end(endTagMatch[1])\n        advance(endTagMatch[0].length)\n        continue\n      }\n    }\n    let text\n    if (textEnd > 0) {\n      text = html.substring(0, textEnd)\n    }\n    if (text) {\n      chars(text)\n      advance(text.length)\n    }\n  }\n  return root\n}","import { generate } from \"./generate\"\nimport { parseHTML } from \"./parse\"\n\n\nexport function compileToFunction(template) {\n  let root = parseHTML(template)\n  let code = generate(root)\n  console.log(code)\n  // html => ast => render函数 =》 虚拟dom =》 真实dom\n}\n","export function isFunction(val) {\n  return typeof val === 'function'\n}\nexport function isObject(val) {\n  return Object.prototype.toString.call(val) === '[object Object]' || val === null\n}","let oldArrayPrototype = Array.prototype\nexport let arrayMethods = Object.create(oldArrayPrototype)\nlet methods = [\n  'push',\n  'pop',\n  'shift',\n  'unshift',\n  'splice',\n  'reverse',\n  'sort'\n]\nmethods.forEach(method => {\n  // 重写数组上的方法\n  arrayMethods[method] = function(...args) {\n    oldArrayPrototype[method].call(this, ...args)\n    let insert\n    let ob = this.__ob__\n    switch(method) {\n      case 'unshift':\n        insert = args\n        break\n      case 'push':\n        insert = args\n        break\n      case 'splice':\n        insert = args.slice(2)\n    }\n    if (insert) {\n      ob.observeArray(insert)\n    }\n  }\n})","import { isObject } from \"../utils\"\nimport { arrayMethods } from \"./array\"\n\n// 通过类来检测数据，类有类型\nclass Observer {\n  constructor(data) { // 对对象中的所有属性进行劫持\n    // 将Observer实例赋值给data的ob属性，方便对数组劫持的时候调用Observe，同时可以判断如果一个数据有ob属性，说明它已经被劫持过了\n    Object.defineProperty(data,' __ob__', {\n      value: this,\n      enumerable: false\n    })\n    if (Array.isArray(data)) {\n      data.__proto__ = arrayMethods\n      // 如果数组的的子元素为对象需要对该子元素进行劫持\n      this.observeArray(data)\n    } else {\n      this.walk(data)\n    }\n  }\n  observeArray(data) {\n    data.forEach(ele => {\n      observe(ele)\n    })\n  }\n  walk(data) {\n    Object.keys(data).forEach(key => {\n      defineReactive(data, key, data[key])\n    })\n  }\n}\n// 对对象的属性进行遍历，用defineProperty对对象的数据进行劫持\nfunction defineReactive(data, key, value) {\n  // 如果对象中的属性还是对象则需要递归调用监测方法\n  observe(value)\n  Object.defineProperty(data, key, {\n    get() {\n      return value\n    },\n    set(newV) {\n      observe(newV) // 如果给对象的属性复制的是一个新对象，则需要对新对象重新劫持\n      value = newV\n    }\n  })\n}\nexport function observe(data) {\n  if (!isObject(data)) {\n    return\n  }\n  if (data.__ob__) {\n    return\n  }\n  new Observer(data)\n}","import { observe } from \"./observer/index\"\nimport { isFunction } from \"./utils\"\n\nexport function initState(vm) { // 状态初始化\n  const opts = vm.$options\n  if (opts.data) {\n    initData(vm)\n  }\n}\nfunction proxy(vm, source, key) {\n  Object.defineProperty(vm, key, {\n    get() {\n      return vm[source][key]\n    },\n    set(newV) {\n      vm[source][key] = newV\n    }\n  })\n}\nfunction initData(vm) {\n  let data = vm.$options.data\n  // 将劫持的数据放在实例的_data上\n  data = vm._data = isFunction(data) ? data.call(vm) : data;\n  // 对数据做一层代理\n  for (let key in data) {\n    proxy(vm, '_data', key)\n  }\n  observe(data)\n}","import { compileToFunction } from \"./compiler/index\"\nimport { initState } from \"./state\"\n\n// 在vue的基础上做一次混合操作，为vue原型添加方法\nexport function initMixin(Vue) {\n  Vue.prototype._init = function (options) {\n    const vm = this\n    vm.$options = options //方便对options进行扩展\n\n    // 对数据进行初始化 data watch computed\n    initState(vm)\n    if (vm.$options.el) {\n      vm.$mounted(vm.$options.el)\n    }\n  }\n\n  Vue.prototype.$mounted = function (el) {\n    const vm = this\n    const options = vm.$options\n    el = document.querySelector(el)\n    // 优先级：render > template > el\n    if (!options.render) {\n      let template = options.template\n      // 如果用户没有传template则取el的内容作为模板\n      if (!template && el) {\n        template = el.outerHTML\n        let render = compileToFunction(template)\n        // 将render函数添加到options上\n        options.render = render\n      }\n    }\n  }\n}\n","import { initMixin } from \"./init\"\n\nfunction Vue(options) {\n  // 初始化Vue实例的配置\n  this._init(options)\n}\n// 扩展原型\ninitMixin(Vue)\nexport default Vue"],"names":["genProps","attrs","reduce","pre","cur","index","name","styleObj","value","replace","arguments","length","JSON","stringify","defaultTagRE","gen","el","type","generate","text","test","tokens","match","lastIndex","exec","push","slice","trim","join","genChildren","children","map","item","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","createAstElement","tagName","parent","root","stack","start","attributes","element","end","last","pop","Error","chars","parseHTML","html","advance","len","substring","parseStartTag","attr","textEnd","indexOf","startTagMatch","endTagMatch","compileToFunction","template","console","log","isFunction","val","isObject","Object","prototype","toString","call","oldArrayPrototype","Array","arrayMethods","create","methods","forEach","method","args","insert","ob","__ob__","observeArray","Observer","data","defineProperty","enumerable","isArray","__proto__","walk","ele","observe","keys","key","defineReactive","get","set","newV","initState","vm","opts","$options","initData","proxy","source","_data","initMixin","Vue","_init","options","$mounted","document","querySelector","render","outerHTML"],"mappings":"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"}